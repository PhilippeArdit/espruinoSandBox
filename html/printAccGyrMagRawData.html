<!DOCTYPE html>
<html>

<head>
  <title>puck.Js printAccGyrMagRawData</title>
</head>

<body>
  <script src="https://www.puck-js.com/puck.js"></script>
  <script src="../js/PuckJsFunctions.js"></script>

  <button id="btnConnect">Connect</button>
  <button id="btnReload">Reload</button>
  <button id="btnReset">Reset</button>
  <button id="btnSendCode">Send code</button>
  <form>
    <input type="radio" name="choice" value="acc" id="choice-acc">
    <label for="choice-acc">acc</label>
    <input type="radio" name="choice" value="gyr" id="choice-gyr">
    <label for="choice-gyr">gyr</label>
    <input type="radio" name="choice" value="mag" id="choice-mag">
    <label for="choice-mag">mag</label>
  </form>
  <script>
    // When we get a line of data...
    function onLine(line) {
      console.log("RECEIVED:" + line);
    }

    // When we click the connect button...
    document.querySelector('#btnConnect').onclick = function () {
      connectToPuckJs("(" + resetOnDisconnect.toString() + ")();\n", onLine);
    };
    // When we click the SendCode button...
    document.querySelector('#btnSendCode').onclick = function () {
      const rbs = document.querySelectorAll('input[name="choice"]');
      let selectedValue;
      for (const rb of rbs) {
        if (rb.checked) {
          selectedValue = rb.value;
          break;
        }
      }
      var jsCode = "(" + printAccGyrMagRawData.toString() + ")('" + selectedValue + "');\n";
      console.log("CODE SENT :\n" + jsCode);
      sendToPuckJs(jsCode);
    };

    // When we click the Reload button...
    document.querySelector('#btnReload').onclick = function () {
      window.location.reload();
    };

    // When we click the Reset button...
    document.querySelector('#btnReset').onclick = function () {
      sendToPuckJs("reset();\n");
    };
  </script>
</body>

</html>